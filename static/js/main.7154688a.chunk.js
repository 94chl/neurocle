(this.webpackJsonpneurocle=this.webpackJsonpneurocle||[]).push([[0],{144:function(e,t,s){"use strict";s.r(t);var n=s(0),o=s(26),r=s.n(o),a=s(85),c=s.n(a),i=s(86),l=s.n(i),h=s(36),d=s(41),u=s(20);var b=(e,t)=>{const[s,o]=Object(n.useState)((()=>{const s=JSON.parse(localStorage.getItem(e));return s||t}));return[s,t=>{const n="function"===typeof t?t(s):t;o(n),localStorage.setItem(e,JSON.stringify(n))}]},j=s(29),y=s(2);var p=e=>{let{color:t,x:s,y:n,width:o,height:r}=e;return Object(y.jsx)(h.d,{fill:t,x:s,y:n,width:Math.abs(o),height:Math.abs(r),opacity:.3})};var x=e=>{let{color:t,x:s,y:n,width:o,height:r}=e;return Object(y.jsx)(h.a,{radiusX:Math.abs(o)/2,radiusY:Math.abs(r)/2,fill:t,x:s+Math.abs(o)/2,y:n+Math.abs(r)/2,width:Math.abs(o),height:Math.abs(r),opacity:.3})};var g=e=>{let{color:t,points:s}=e;return Object(y.jsx)(h.c,{fill:t,points:s,closed:!0,opacity:.3})};const{container:O,stage:w}=l.a;var v=()=>{const[e,t]=Object(n.useState)({width:0,height:0}),s=Object(n.useRef)(null),o=Object(n.useRef)(null);Object(n.useEffect)((()=>{s.current&&t({width:s.current.clientWidth,height:s.current.clientHeight});const e=()=>{t({width:s.current.clientWidth,height:s.current.clientHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const a=Object(d.b)(),{drawables:c,drawableType:i,fillColor:l,layersHistory:v,layersNow:f,layersHistoryLimit:C}=Object(d.c)((e=>e.canvas)),[_,m]=b("storedLayersHistory",[]),[L,N]=b("storedLayersNow",-1);Object(n.useEffect)((()=>{_[L]<0&&N(_.length-1),!v.length&&_.length&&(a(u.a.actions.setLayersHitory(_)),a(u.a.actions.setLayersNow(L)),a(u.a.actions.setDrawables(_[L]?_[L]:[])))}),[]);const[B,S]=Object(n.useState)([]),[T,E]=Object(n.useState)({type:i,x:0,y:0,width:0,height:0,points:[],fillColor:l}),H=Object(n.useRef)(!1),D=()=>{E({type:i,x:0,y:0,width:0,height:0,points:[],fillColor:l}),S([]),H.current=!1},I=e=>{if(!H.current)return;const t=B[0]-B[B.length-2],s=B[1]-B[B.length-1],n=t<0?B[0]:B[B.length-2],o=s<0?B[1]:B[B.length-1],r={type:i,x:n,y:o,width:t,height:s,points:[...B],fillColor:l},a=[...B.slice(0,B.length>2?B.length-2:2),e.pageX,e.pageY];S(a),r.drawablePoints=a,E(r)},M=()=>c.map(((e,t)=>{switch(console.log(e),e.type){case j.a.ellipse:return Object(y.jsx)(x,{color:e.fillColor,x:e.x,y:e.y,width:e.width,height:e.height},`${e.type}-${t}`);case j.a.rect:return Object(y.jsx)(p,{color:e.fillColor,x:e.x,y:e.y,width:e.width,height:e.height},`${e.type}-${t}`);case j.a.polygon:return Object(y.jsx)(g,{color:e.fillColor,points:e.points,closed:!0},`${e.type}-${t}`);default:return null}})),k=()=>{switch(T.type){case j.a.ellipse:return Object(y.jsx)(x,{color:T.fillColor,x:T.x,y:T.y,width:T.width,height:T.height});case j.a.rect:return Object(y.jsx)(p,{color:T.fillColor,x:T.x,y:T.y,width:T.width,height:T.height});case j.a.polygon:return Object(y.jsx)(g,{color:T.fillColor,points:T.points,closed:!0});default:return null}};return Object(y.jsx)("div",{className:r()(O),ref:s,onMouseMove:I,onMouseDown:e=>{console.log("START DRAW",e),!1===H.current?(H.current=!0,I(e)):i===j.a.polygon?console.log("add polygon point"):D()},onMouseUp:()=>{if(console.log("FINISH"),!H.current)return void D();if(i===j.a.select)return void(()=>{if(null!==o&&void 0!==o&&o.current){var e,t;const s=null===(e=o.current)||void 0===e?void 0:e.getPointerPosition(),n=null===(t=o.current)||void 0===t?void 0:t.getIntersection(s);console.log("SELECT",n),H.current=!1}})();const e=[...c],t=f<C-1?v.filter(((e,t)=>t<=f)):v.filter(((e,t)=>v.length-C+1<=t&&t<C)),s={...T,points:B.slice(0,B.length-2)};console.log("NEW",s),e.push(s),a(u.a.actions.setDrawables(e)),t.push(e),m(t),a(u.a.actions.setLayersHitory(t));const n=f+1<C-1?f+1:C-1;N(n),a(u.a.actions.setLayersNow(n)),D()},onKeyDown:e=>"Escape"===e.key&&D(),tabIndex:"0",children:Object(y.jsx)(h.e,{ref:o,className:r()(w),width:e.width,height:e.height,children:Object(y.jsxs)(h.b,{children:[Object(y.jsx)(M,{}),Object(y.jsx)(k,{})]})})})},f=s(88),C=s.n(f),_=s(23);const{container:m,drawableButtonBox:L,customInputBox:N,controlButtonBox:B,guideBox:S}=C.a,T=Object.values(j.a);var E=()=>{const e=Object(d.b)(),{drawables:t,drawableType:s,fillColor:n,layersHistory:o,layersNow:a,layersHistoryLimit:c}=Object(d.c)((e=>e.canvas)),[i,l]=b("storedLayersHistory",[]),[h,j]=b("storedLayersNow",-1);return Object(y.jsxs)("div",{className:r()(m),children:[Object(y.jsx)(P,{onClick:()=>{try{throw new Error("Sentry: Button Error")}catch(e){console.error(e),_.c(e)}},children:"\uc5d0\ub7ec\ubc1c\uc0dd"}),Object(y.jsxs)("div",{className:r()(L),children:[Object(y.jsx)("h3",{children:"\ub4dc\ub85c\uc789 \ud0c0\uc785"}),Object(y.jsx)("div",{children:T.map((t=>Object(y.jsx)(P,{onClick:()=>{return s=t,void e(u.a.actions.sedrawableType(s));var s},isActive:s===t,children:t},`TOOL_TYPE_${t}`)))})]}),Object(y.jsxs)("div",{className:r()(N),children:[Object(y.jsx)("h3",{children:"\ub4dc\ub85c\uc789 \uc635\uc158"}),Object(y.jsx)("div",{children:Object(y.jsx)(F,{inputId:"fillColor",onChange:t=>((t,s)=>{e(u.a.actions.setColor({target:s,value:t.target.value}))})(t,"fillColor"),value:n,inputOption:{type:"color"},children:"\ucc44\uc6b0\uae30 \uc0c9\uc0c1"})})]}),Object(y.jsxs)("div",{className:r()(B),children:[Object(y.jsx)("h3",{children:"\ud3b8\uc9d1"}),Object(y.jsxs)("div",{children:[Object(y.jsx)(P,{onClick:()=>{const t=a>=0?a>o.length-1?o.length-1:a-1:-1;j(t),e(u.a.actions.setLayersNow(t)),e(u.a.actions.setDrawables(t>-1?o[t]:[]))},isActive:!1,isDisable:a<0,children:"undo"}),Object(y.jsx)(P,{onClick:()=>{const t=a<o.length-1?a+1:o.length-1;j(t),e(u.a.actions.setLayersNow(t)),e(u.a.actions.setDrawables(t>-1?o[t]:[]))},isActive:!1,isDisable:a>=o.length-1,children:"redo"}),Object(y.jsx)(P,{onClick:()=>t.length&&(()=>{const t=o.filter(((e,t)=>t<=a));t.push([]),e(u.a.actions.setDrawables([])),e(u.a.actions.setLayersHitory(t)),l(t);const s=a+1<c-1?a+1:c-1;e(u.a.actions.setLayersNow(s)),j(s)})(),isActive:!1,isDisable:!t.length,children:"clear"}),Object(y.jsx)(P,{onClick:()=>{window.confirm("\ucd08\uae30\ud654 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(e(u.a.actions.setDrawables([])),e(u.a.actions.setLayersHitory([])),l([]),e(u.a.actions.setLayersNow(-1)),j(-1))},isActive:!1,children:"reset"})]})]}),Object(y.jsxs)("div",{className:r()(S),children:[Object(y.jsx)("h3",{children:"\uc0ac\uc6a9 \uc815\ubcf4"}),Object(y.jsxs)("ul",{children:[Object(y.jsxs)("li",{children:[Object(y.jsx)("span",{children:"esc:"}),Object(y.jsx)("span",{children:"\uc9c4\ud589 \uc911\uc778 \uc791\uc5c5 \ucde8\uc18c"})]}),Object(y.jsxs)("li",{children:[Object(y.jsx)("span",{children:"\ub354\ube14\ud074\ub9ad:"}),Object(y.jsx)("span",{children:"\uc9c4\ud589 \uc911\uc778 \uc791\uc5c5(\uace1\uc120, \ub2e4\uac01\ud615)\uc744 \ud574\ub2f9 \uc704\uce58\uc5d0\uc11c \uc644\ub8cc"})]})]})]})]})},H=s(89),D=s.n(H);const{button:I,active:M,disable:k}=D.a;var P=e=>{let{onClick:t,isActive:s,isDisable:n,style:o,children:a}=e;return Object(y.jsx)("button",{onClick:t,className:r()(I,{[M]:s,[k]:n}),disabled:n,style:o,children:a})},R=s(90),A=s.n(R);const{container:$}=A.a;var F=e=>{let{style:t,inputOption:s,inputId:n,onChange:o,value:a,children:c}=e;return Object(y.jsxs)("div",{className:r()($),style:t,children:[Object(y.jsx)("label",{htmlFor:n,children:c}),Object(y.jsx)("input",{id:n,onChange:o,value:a,...s})]})};const{container:J}=c.a;t.default=function(){return Object(y.jsxs)("div",{className:r()(J),children:[Object(y.jsx)(v,{}),Object(y.jsx)(E,{})]})}},145:function(e,t,s){"use strict";s.r(t);s(0);var n=s(75);s(98);var o=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,161)).then((t=>{let{getCLS:s,getFID:n,getFCP:o,getLCP:r,getTTFB:a}=t;s(e),n(e),o(e),r(e),a(e)}))},r=s(41),a=s(54),c=s(20);const i=Object(a.a)({reducer:{canvas:c.a.reducer}});var l=s(156),h=s(157),d=s(158),u=s(2);l.a({dsn:"https://2b40a7e129417643627963bd11e55402@o4507158840999936.ingest.us.sentry.io/4507158845325312",integrations:[h.a(),d.a()],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/yourserver\.io\/api/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});const b=document.getElementById("root"),j=Object(n.createRoot)(b);(()=>{const e=s(144).default;j.render(Object(u.jsx)(r.a,{store:i,children:Object(u.jsx)(e,{})}))})(),o()},20:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(54),o=s(29);const r=Object(n.b)({name:"canvas",initialState:{drawableType:o.a.rect,fillColor:"#000000",drawables:[],layersHistory:[],layersNow:-1,layersHistoryLimit:40},reducers:{sedrawableType:(e,t)=>{let{payload:s}=t;e.drawableType=s},setColor:(e,t)=>{let{payload:s}=t;e[s.target]=s.value},setDrawables:(e,t)=>{let{payload:s}=t;e.drawables=s},setLayersHitory:(e,t)=>{let{payload:s}=t;e.layersHistory=s},setLayersNow:(e,t)=>{let{payload:s}=t;e.layersNow=s}}})},29:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));let n=function(e){return e.select="SELECT",e.rect="RECT",e.ellipse="ELLIPSE",e.polygon="POLYGON",e}({})},85:function(e,t,s){e.exports={container:"App_container__eSJ6i"}},86:function(e,t,s){e.exports={container:"Canvas_container__1Vfbb",stage:"Canvas_stage__35f8o"}},88:function(e,t,s){e.exports={container:"Tool_container__1Szw6",drawableButtonBox:"Tool_drawableButtonBox__3-exa",customInputBox:"Tool_customInputBox__5O10G",controlButtonBox:"Tool_controlButtonBox__1dCPk",guideBox:"Tool_guideBox__1njCz"}},89:function(e,t,s){e.exports={button:"Button_button__17x3e",active:"Button_active__15qMB",disable:"Button_disable__M3pI4"}},90:function(e,t,s){e.exports={container:"CustomInput_container__1QDtG"}},98:function(e,t,s){}},[[145,1,2]]]);
//# sourceMappingURL=main.7154688a.chunk.js.map